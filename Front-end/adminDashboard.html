<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - RecycLanka</title>
    <meta name="description" content="RecycLanka Admin Dashboard - Municipal Waste Management System">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom Styles -->
    <link rel="stylesheet" href="style/admin-style.css">
    <link rel="stylesheet" href="style/style.css">
    <link rel="stylesheet" href="style/admin-waste-schedule.css">
    <link rel="stylesheet" href="style/adminComplaint.css">


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top admin-navbar">
    <div class="container-fluid">
        <a class="navbar-brand d-flex align-items-center" href="#home">
            <i class="fas fa-recycle brand-icon me-2"></i>
            <span class="brand-text">RecycLanka</span>
        </a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="showSection('dashboard')">
                        <i class="fas fa-home me-1"></i>Home
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="showSection('collection-schedule')">
                        <i class="fas fa-calendar-alt me-1"></i>Collection Schedule
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="showSection('inventory-management')">
                        <i class="fas fa-boxes me-1"></i>Inventory Management
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="showSection('statistics')">
                        <i class="fas fa-chart-bar me-1"></i>Statistics
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="showSection('waste-entry')">
                        <i class="fas fa-plus-circle me-1"></i>Waste Entry
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="showSection('admin-complaints')">
                        <i class="fas fa-exclamation-triangle me-1"></i>Complaints
                    </a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                        <i class="fas fa-ellipsis-h me-1"></i>More
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#" onclick="showSection('report')"><i class="fas fa-file-alt me-2"></i>Reports</a></li>
                        <li><a class="dropdown-item" href="#" onclick="showSection('settings')"><i class="fas fa-cog me-2"></i>Settings</a></li>
                        <li><a class="dropdown-item" href="#" onclick="showSection('user-management')"><i class="fas fa-users me-2"></i>User Management</a></li>
                    </ul>
                </li>
            </ul>

            <div class="navbar-nav">
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown">
                        <div class="profile-avatar me-2">
                            <i class="fas fa-user-shield"></i>
                        </div>
                        <span>Admin</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item" href="#profile"><i class="fas fa-user me-2"></i>Profile</a></li>
                        <li><a class="dropdown-item" href="#notifications"><i class="fas fa-bell me-2"></i>Notifications</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#" id="logoutBtn"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>

<section id="dashboard" class="dashboard section">
    <!-- Hero Section -->
    <section id="home" class="hero-section">
        <div class="hero-overlay"></div>
        <div class="container">
            <div class="row align-items-center min-vh-100">
                <div class="col-lg-8">
                    <div class="hero-content">
                        <div class="hero-badge">
                            <i class="fas fa-leaf me-2"></i>
                            Municipal Waste Management System
                        </div>
                        <h1 class="hero-title">
                            Welcome to <span class="brand-color">RecycLanka</span>
                            <br>Admin Dashboard
                        </h1>
                        <p class="hero-description">
                            Streamline waste collection, enhance recycling efficiency, and build sustainable communities
                            through our comprehensive digital platform. Monitor real-time operations, track environmental
                            impact, and drive Sri Lanka towards a circular economy.
                        </p>

                        <div class="hero-stats">
                            <div class="row g-4">
                                <div class="col-md-3 col-6">
                                    <div class="stat-card">
                                        <div class="stat-icon">
                                            <i class="fas fa-recycle"></i>
                                        </div>
                                        <div class="stat-number"  data-count="2847">0</div>
                                        <div class="stat-label">Tons Recycled</div>
                                    </div>
                                </div>
                                <div class="col-md-3 col-6">
                                    <div class="stat-card">
                                        <div class="stat-icon">
                                            <i class="fas fa-truck"></i>
                                        </div>
                                        <div class="stat-number" id="active-routes" data-count="0">0</div>
                                        <div class="stat-label">Active Routes</div>
                                    </div>
                                </div>
                                <div class="col-md-3 col-6">
                                    <div class="stat-card">
                                        <div class="stat-icon">
                                            <i class="fas fa-users"></i>
                                        </div>
                                        <div class="stat-number" data-count="12500">0</div>
                                        <div class="stat-label">Citizens Served</div>
                                    </div>
                                </div>
                                <div class="col-md-3 col-6">
                                    <div class="stat-card">
                                        <div class="stat-icon">
                                            <i class="fas fa-leaf"></i>
                                        </div>
                                        <div class="stat-number" data-count="89">0</div>
                                        <div class="stat-label">COâ‚‚ Reduction %</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="hero-actions">
                            <a href="#waste-entry" class="btn btn-primary btn-lg me-3">
                                <i class="fas fa-plus me-2"></i>New Waste Entry
                            </a>
                            <a href="#statistics" class="btn btn-outline-light btn-lg">
                                <i class="fas fa-chart-line me-2"></i>View Analytics
                            </a>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="hero-image">
                        <div class="floating-cards">
                            <div class="card float-card card-1">
                                <div class="card-body text-center">
                                    <i class="fas fa-recycle  fs-2 mb-2 brand-color"></i>
                                    <h6>Smart Recycling</h6>
                                    <small class="text-muted">AI-powered sorting</small>
                                </div>
                            </div>
                            <div class="card float-card card-2">
                                <div class="card-body text-center">
                                    <i class="fas fa-route  fs-2 mb-2 brand-color"></i>
                                    <h6>Route Optimization</h6>
                                    <small class="text-muted">Efficient collection</small>
                                </div>
                            </div>
                            <div class="card float-card card-3">
                                <div class="card-body text-center brand-color">
                                    <i class="fas fa-chart-pie  fs-2 mb-2"></i>
                                    <h6>Real-time Analytics</h6>
                                    <small class="text-muted">Data-driven insights</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Decorative Elements -->
        <div class="hero-decorations">
            <div class="decoration decoration-1">
                <i class="fas fa-leaf"></i>
            </div>
            <div class="decoration decoration-2">
                <i class="fas fa-recycle"></i>
            </div>
            <div class="decoration decoration-3">
                <i class="fas fa-seedling"></i>
            </div>
        </div>
    </section>

    <!-- Quick Actions Section -->
    <section class="quick-actions-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="action-card" data-section="collection" onclick="showSection('collection-schedule')">
                        <div class="action-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <h5>Schedule Management</h5>
                        <p>Manage collection schedules and routes efficiently</p>
                        <div class="action-badge" id="active-schedules">24 Active</div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="action-card" data-section="inventory">
                        <div class="action-icon">
                            <i class="fas fa-warehouse"></i>
                        </div>
                        <h5>Inventory Control</h5>
                        <p>Track waste materials and recycling inventory</p>
                        <div class="action-badge">85% Full</div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="action-card" data-section="complaints" onclick="showSection('admin-complaints')">
                        <div class="action-icon">
                            <i class="fas fa-headset"></i>
                        </div>
                        <h5>Complaint System</h5>
                        <p>Handle citizen complaints and feedback</p>
                        <div class="action-badge alert">3 New</div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="action-card" data-section="statistics">
                        <div class="action-icon">
                            <i class="fa-solid fa-gauge-simple-high"></i>
                        </div>
                        <h5>Performance Analytics</h5>
                        <p>Monitor system performance and environmental impact</p>
                        <div class="action-badge success">â†— 12%</div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</section>


<!--Collection Schedule Management Section-->
<section id="collection-schedule" class="section" style="display: none;">
    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <h1 class="page-title">Collection Schedule Management</h1>
                    <p class="page-subtitle">
                        Plan and manage waste collection schedules across municipalities and wards.
                        Set specific times for degradable, recyclable, and non-recyclable waste collection.
                    </p>
                </div>
                <div class="col-lg-4 d-flex align-items-center justify-content-end">
                    <button class="btn btn-primary" onclick="generatePDFReport()">
                        <i class="fas fa-file-pdf me-2"></i>Generate PDF Report
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <div class="container my-5">
        <!-- Control Panel -->
        <div class="control-panel">
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="municipalSelect" class="form-label">
                        <i class="fas fa-city me-2"></i>Select Municipality
                    </label>
                    <select class="form-select" id="municipalSelect" onchange="loadWards()">
                        <option value="" disabled selected>Select Municipal</option>
                        <option value="Colombo">Colombo Municipal Council</option>
                        <option value="Dehiwala-Mount Lavinia">Dehiwala-Mount Lavinia Municipal Council</option>
                        <option value="Sri Jayawardenepura Kotte">Sri Jayawardenepura Kotte Municipal Council</option>
                        <option value="Kaduwela">Kaduwela Municipal Council</option>
                        <option value="Moratuwa">Moratuwa Municipal Council</option>
                        <option value="Negombo">Negombo Municipal Council</option>
                        <option value="Gampaha">Gampaha Municipal Council</option>
                        <option value="Kurunegala">Kurunegala Municipal Council</option>
                        <option value="Kandy">Kandy Municipal Council</option>
                        <option value="Matale">Matale Municipal Council</option>
                        <option value="Dambulla">Dambulla Municipal Council</option>
                        <option value="Nuwara Eliya">Nuwara Eliya Municipal Council</option>
                        <option value="Badulla">Badulla Municipal Council</option>
                        <option value="Bandarawela">Bandarawela Municipal Council</option>
                        <option value="Galle">Galle Municipal Council</option>
                        <option value="Matara">Matara Municipal Council</option>
                        <option value="Hambantota">Hambantota Municipal Council</option>
                        <option value="Ratnapura">Ratnapura Municipal Council</option>
                        <option value="Anuradhapura">Anuradhapura Municipal Council</option>
                        <option value="Polonnaruwa">Polonnaruwa Municipal Council</option>
                        <option value="Jaffna">Jaffna Municipal Council</option>
                        <option value="Batticaloa">Batticaloa Municipal Council</option>
                        <option value="Kalmunai">Kalmunai Municipal Council</option>
                        <option value="Akkaraipattu">Akkaraipattu Municipal Council</option>

                    </select>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="wardSelect" class="form-label">
                        <i class="fas fa-map-marker-alt me-2"></i>Select Ward
                    </label>
                    <select class="form-select " id="wardSelect"  disabled required>
                        <option value="check">Select municipality first...</option>
                    </select>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="searchWard" class="form-label">
                        <i class="fas fa-search me-2"></i>Search Wards
                    </label>
                    <input type="text" class="form-control" id="searchWard" placeholder="Type to search wards..." oninput="searchWards()">
                </div>
            </div>
        </div>

        <!-- Schedule Form -->
        <div class="control-panel" id="scheduleForm" style="display:none;">
            <h5 class="mb-4">
                <i class="fas fa-calendar-plus me-2"></i>
                Set Collection Schedule for <span id="selectedWardName"></span>
            </h5>
            <div class="row">
                <!-- Day of Week -->
                <div class="col-md-6 mb-3">
                    <label for="collectionDay" class="form-label">Collection Day</label>
                    <select class="form-select" id="collectionDay">
                        <option value="" disabled selected>Select day...</option>
                        <option value="MONDAY">Monday</option>
                        <option value="TUESDAY">Tuesday</option>
                        <option value="WEDNESDAY">Wednesday</option>
                        <option value="THURSDAY">Thursday</option>
                        <option value="FRIDAY">Friday</option>
                        <option value="SATURDAY">Saturday</option>
                        <option value="SUNDAY">Sunday</option>
                    </select>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="wasteType" class="form-label">Waste Type</label>
                    <select class="form-select" id="wasteType">
                        <option value="" disabled selected>Select waste type...</option>
                        <option value="ORGANIC">Organic Waste</option>
                        <option value="RECYCLABLE">Recyclable Waste</option>
                        <option value="GENERAL">General Waste</option>
                    </select>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="startTime" class="form-label">Time</label>
                    <input type="time" class="form-control" id="startTime">
                </div>
                <div class="col-md-6 mb-3">
                    <label for="status" class="form-label">Status</label>
                    <select class="form-select" id="status">
                        <option value="" disabled selected>Select status...</option>
                        <option value="ACTIVE">Active</option>
                        <option value="INACTIVE">Inactive</option>
                        <option value="CANCELLED">Cancelled</option>
                    </select>
                </div>
                <div class="col-12">
                    <button class="btn btn-primary" onclick="addSchedule()">
                        <i class="fas fa-plus me-2"></i>Add Schedule
                    </button>
                    <button class="btn btn-outline-primary ms-2" onclick="clearForm()">
                        <i class="fas fa-times me-2"></i>Clear Form
                    </button>
                </div>
            </div>
        </div>

        <!-- Current Schedules -->
        <div class="schedule-table" id="schedulesContainer" style="display: none;">
            <div class="p-4">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 class="mb-0">
                        <i class="fas fa-list me-2"></i>
                        Collection Schedules for <span id="currentMunicipalName"></span>
                    </h5>
                    <span class="badge bg-primary" id="scheduleCount">0 schedules</span>
                </div>
            </div>

            <div class="table-responsive">
                <table class="table" id="schedulesTable">
                    <thead>
                    <tr>
                        <th>Ward</th>
                        <th>Day</th>
                        <th>Waste Type</th>
                        <th>Time</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                    </thead>
                    <tbody id="schedulesTableBody">
                    <!-- Dynamic content -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>


<!-- Update Schedule Modal -->
<div class="modal fade" id="updateScheduleModal" tabindex="-1" aria-labelledby="updateScheduleLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="updateScheduleLabel">Update Schedule</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="updateScheduleForm">
                    <input type="hidden" id="updateScheduleId">

                    <div class="mb-3">
                        <label class="form-label">Ward Name</label>
                        <input type="text" id="updateWardName" class="form-control" disabled>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Waste Type</label>
                        <select id="updateWasteType" class="form-select">
                            <option value="ORGANIC">ORGANIC</option>
                            <option value="RECYCLABLE">RECYCLABLE</option>
                            <option value="GENERAL">GENERAL</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Day</label>
                        <select id="updateDay" class="form-select">
                            <option value="MONDAY">MONDAY</option>
                            <option value="TUESDAY">TUESDAY</option>
                            <option value="WEDNESDAY">WEDNESDAY</option>
                            <option value="THURSDAY">THURSDAY</option>
                            <option value="FRIDAY">FRIDAY</option>
                            <option value="SATURDAY">SATURDAY</option>
                            <option value="SUNDAY">SUNDAY</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Time</label>
                        <input type="time" id="updateTime" class="form-control">
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Status</label>
                        <select id="updateStatus" class="form-select">
                            <option value="ACTIVE">ACTIVE</option>
                            <option value="INACTIVE">INACTIVE</option>
                            <option value="CANCELLED">CANCELLED</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" id="saveUpdateBtn" class="btn btn-primary">Update</button>
            </div>
        </div>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal fade" id="deleteScheduleModal" tabindex="-1" aria-labelledby="deleteScheduleLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Delete Schedule</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this schedule?</p>
                <input type="hidden" id="deleteScheduleId">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" id="confirmDeleteBtn" class="btn btn-danger">Delete</button>
            </div>
        </div>
    </div>
</div>


<!--Complaint Management Section-->
<!-- Admin Complaints Section -->
<!-- Admin Complaints Section -->
<!-- Admin Complaints Section -->
<section id="admin-complaints" class="section admin-complaints-section" style="display: none; padding: 5rem 0; background: var(--gray-50);">
    <div class="container">
        <div class="section-header text-center mb-5">
            <div class="hero-badge d-inline-flex align-items-center mb-3">
                <i class="fas fa-cogs me-2"></i>
                Complaints Management
            </div>
            <h2 class="section-title">Admin Dashboard - Complaints</h2>
            <p class="section-description">
                Manage and resolve citizen complaints efficiently. Monitor complaint status, response times,
                and maintain high service quality standards across all municipal areas.
            </p>
        </div>

        <!-- Summary Stats -->
        <div class="row mb-5">
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="admin-stat-card pending">
                    <div class="stat-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number-value" id="pendingCount">23</div>
                        <div class="stat-label">Pending</div>
                        <div class="stat-change">+3 today</div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="admin-stat-card in-progress">
                    <div class="stat-icon">
                        <i class="fas fa-spinner"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number-value" id="inProgressCount">12</div>
                        <div class="stat-label">In Progress</div>
                        <div class="stat-change">Same as yesterday</div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="admin-stat-card resolved">
                    <div class="stat-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number-value" id="resolvedCount">147</div>
                        <div class="stat-label">Resolved</div>
                        <div class="stat-change">+8 today</div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="admin-stat-card total">
                    <div class="stat-icon">
                        <i class="fas fa-list"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number-value" id="totalCount">182</div>
                        <div class="stat-label">Total</div>
                        <div class="stat-change">94% resolved</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Filters and Controls -->
        <div class="admin-controls-card mb-4">
            <div class="controls-header">
                <h3 class="controls-title">
                    <i class="fas fa-filter me-2"></i>
                    Filter & Search Complaints
                </h3>
            </div>
            <div class="controls-content">
                <div class="row g-3">
                    <div class="col-lg-3 col-md-6">
                        <div class="form-floating">
                            <select class="form-select" id="filterMunicipal" onchange="loadFilterWards(); filterComplaints();">
                                <option value="">All Municipals</option>
                                <option value="Colombo">Colombo Municipal Council</option>
                                <option value="Dehiwala-Mount Lavinia">Dehiwala-Mount Lavinia Municipal Council</option>
                                <option value="Sri Jayawardenepura Kotte">Sri Jayawardenepura Kotte Municipal Council</option>
                                <option value="Kaduwela">Kaduwela Municipal Council</option>
                                <option value="Moratuwa">Moratuwa Municipal Council</option>
                                <option value="Negombo">Negombo Municipal Council</option>
                                <option value="Gampaha">Gampaha Municipal Council</option>
                                <option value="Kurunegala">Kurunegala Municipal Council</option>
                                <option value="Kandy">Kandy Municipal Council</option>
                                <option value="Matale">Matale Municipal Council</option>
                            </select>
                            <label for="filterMunicipal">Municipal Council</label>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="form-floating">
                            <select class="form-select" id="filterWard" onchange="filterComplaints();" disabled>
                                <option value="">All Wards</option>
                            </select>
                            <label for="filterWard">Ward</label>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-6">
                        <div class="form-floating">
                            <select class="form-select" id="filterStatus" onchange="filterComplaints();">
                                <option value="">All Status</option>
                                <option value="PENDING">Pending</option>
                                <option value="IN_PROGRESS">In Progress</option>
                                <option value="RESOLVED">Resolved</option>
                            </select>
                            <label for="filterStatus">Status</label>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-6">
                        <div class="form-floating">
                            <select class="form-select" id="filterPriority" onchange="filterComplaints();">
                                <option value="">All Priority</option>
                                <option value="HIGH">High</option>
                                <option value="MEDIUM">Medium</option>
                                <option value="LOW">Low</option>
                            </select>
                            <label for="filterPriority">Priority</label>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-12">
                        <button type="button" class="btn btn-outline-primary w-100 h-100" onclick="resetFilters();">
                            <i class="fas fa-undo me-2"></i>Reset Filters
                        </button>
                    </div>
                </div>
                <div class="row g-3 mt-2">
                    <div class="col-12">
                        <div class="search-box">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" class="form-control" id="searchInput" placeholder="Search complaints by ID, name, or description..." onkeyup="filterComplaints();">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Complaints Table -->
        <div class="complaints-table-card">
            <div class="table-header">
                <div class="d-flex justify-content-between align-items-center">
                    <h3 class="table-title">
                        <i class="fas fa-list me-2"></i>
                        Complaints List
                        <span class="result-count" id="resultCount">(182 complaints)</span>
                    </h3>
                    <div class="table-actions">
                        <button type="button" class="btn btn-outline-success me-2" onclick="exportComplaints();">
                            <i class="fas fa-download me-1"></i>Export
                        </button>
                        <button type="button" class="btn btn-outline-success me-2" onclick="refreshComplaints();">
                            <i class="fas fa-sync-alt me-1"></i>Refresh
                        </button>
                    </div>
                </div>
            </div>

            <div class="table-responsive">
                <table class="table complaints-table" id="complaintsTable">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>Date</th>
                        <th>Citizen</th>
                        <th>Location</th>
                        <th>Type</th>
                        <th>Priority</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                    </thead>
                    <tbody id="complaintsTableBody">
                    <!-- Dynamic content will be loaded here -->
                    </tbody>
                </table>
            </div>

            <div class="table-footer">
                <div class="d-flex justify-content-between align-items-center">
                    <div class="showing-info">
                        Showing <span id="showingStart">1</span> to <span id="showingEnd">10</span> of <span id="showingTotal">182</span> complaints
                    </div>
                    <nav aria-label="Complaints pagination">
                        <ul class="pagination mb-0" id="pagination">
                            <li class="page-item disabled"><a class="page-link" href="#">Previous</a></li>
                            <li class="page-item active"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item"><a class="page-link" href="#">Next</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>

    <!-- View/Edit Complaint Modal -->
    <div class="modal fade" id="complaintModal" tabindex="-1" aria-labelledby="complaintModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="complaintModalLabel">
                        <i class="fas fa-edit me-2"></i>
                        Complaint Details - <span id="modalComplaintId">#RC2024001</span>
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="complaint-details">
                        <div class="row g-4">
                            <div class="col-md-6">
                                <div class="detail-group">
                                    <label class="detail-label">Submitted Date</label>
                                    <div class="detail-value" id="modalDate">2024-01-15 14:30</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="detail-group">
                                    <label class="detail-label">Current Status</label>
                                    <div class="detail-value">
                                        <span class="status-badge pending" id="modalCurrentStatus">Pending</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="detail-group">
                                    <label class="detail-label">Citizen Name</label>
                                    <div class="detail-value" id="modalCitizenName">John Doe</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="detail-group">
                                    <label class="detail-label">Phone Number</label>
                                    <div class="detail-value" id="modalPhone">+94 77 123 4567</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="detail-group">
                                    <label class="detail-label">Municipal</label>
                                    <div class="detail-value" id="modalMunicipal">Colombo Municipal Council</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="detail-group">
                                    <label class="detail-label">Ward</label>
                                    <div class="detail-value" id="modalWard">Ward 1 - Fort</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="detail-group">
                                    <label class="detail-label">Complaint Type</label>
                                    <div class="detail-value" id="modalType">Missed Collection</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="detail-group">
                                    <label class="detail-label">Priority</label>
                                    <div class="detail-value">
                                        <span class="priority-badge high" id="modalPriority">High</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="detail-group">
                                    <label class="detail-label">Description</label>
                                    <div class="detail-value description" id="modalDescription">
                                        The waste collection truck did not come to our street yesterday (Monday).
                                        This is the second time this month. Please arrange for collection as soon as possible.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <hr class="my-4">

                        <!-- Status Update Form -->
                        <div class="status-update-form">
                            <h6 class="mb-3">
                                <i class="fas fa-cog me-2"></i>
                                Update Complaint Status
                            </h6>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select class="form-select" id="newStatus" required>
                                            <option value="pending">Pending</option>
                                            <option value="in-progress">In Progress</option>
                                            <option value="resolved">Resolved</option>
                                        </select>
                                        <label for="newStatus">New Status</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="text" class="form-control" id="updatedBy" value="Admin User" readonly>
                                        <label for="updatedBy">Updated By</label>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-floating">
                                        <textarea class="form-control" id="statusNote" style="height: 100px" placeholder="Add resolution notes..."></textarea>
                                        <label for="statusNote">Resolution Notes (Optional)</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-danger" onclick="deleteComplaint()">
                        <i class="fas fa-trash me-2"></i>Delete
                    </button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times me-2"></i>Cancel
                    </button>
                    <button type="button" class="btn btn-primary" onclick="updateComplaintStatus()">
                        <i class="fas fa-save me-2"></i>Update Status
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal fade" id="deleteModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-0 pb-0">
                    <div class="w-100 text-center">
                        <div class="delete-icon mb-3">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <h4>Delete Complaint?</h4>
                    </div>
                </div>
                <div class="modal-body text-center">
                    <p class="mb-3">Are you sure you want to delete complaint <strong id="deleteComplaintId">#RC2024001</strong>?</p>
                    <p class="text-muted mb-0">This action cannot be undone.</p>
                </div>
                <div class="modal-footer border-0 justify-content-center">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times me-2"></i>Cancel
                    </button>
                    <button type="button" class="btn btn-danger" onclick="confirmDelete()">
                        <i class="fas fa-trash me-2"></i>Delete
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Footer -->
<footer class="admin-footer">
    <div class="container">
        <div class="row">
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="footer-brand">
                    <div class="d-flex align-items-center mb-3 justify-content-md-start justify-content-center">
                        <i class="fas fa-recycle  fs-2 me-3 brand-color"></i>
                        <div class="text-md-start text-center">
                            <h5 class="mb-0">RecycLanka</h5>
                            <small class="">Sustainable Future Initiative</small>
                        </div>
                    </div>
                    <p class=" text-md-start text-center">
                        Leading Sri Lanka's digital transformation in waste management and recycling.
                        Building cleaner, greener communities through innovative technology solutions.
                    </p>
                </div>
            </div>

            <div class="col-lg-2 col-md-3 col-sm-6 mb-4">
                <h6 class="footer-title text-md-start text-center">Quick Links</h6>
                <ul class="footer-links">
                    <li><a href="#" onclick="showSection('dashboard')">Dashboard</a></li>
                    <li><a href="#" onclick="showSection('collection-schedule')">Collections</a></li>
                    <li><a href="#inventory">Inventory</a></li>
                    <li><a href="#statistics">Analytics</a></li>
                </ul>
            </div>

            <div class="col-lg-2 col-md-3 col-sm-6 mb-4">
                <h6 class="footer-title text-md-start text-center">Management</h6>
                <ul class="footer-links">
                    <li><a href="#waste-entry">Waste Entry</a></li>
                    <li><a href="#" onclick="showSection('admin-complaints')">Complaints</a></li>
                    <li><a href="#reports">Reports</a></li>
                    <li><a href="#settings">Settings</a></li>
                </ul>
            </div>

            <div class="col-lg-2 col-md-3 col-sm-6 mb-4">
                <h6 class="footer-title text-md-start text-center">Support</h6>
                <ul class="footer-links">
                    <li><a href="#help">Help Center</a></li>
                    <li><a href="#documentation">Documentation</a></li>
                    <li><a href="#training">Training</a></li>
                    <li><a href="#contact">Contact Us</a></li>
                </ul>
            </div>

            <div class="col-lg-2 col-md-3 col-sm-6 mb-4">
                <h6 class="footer-title text-md-start text-center">Environmental Impact</h6>
                <div class="impact-stats">
                    <div class="impact-item">
                        <i class="fas fa-tree brand-color"></i>
                        <span>1,247 Trees Saved</span>
                    </div>
                    <div class="impact-item">
                        <i class="fas fa-water brand-color"></i>
                        <span>89% Water Saved</span>
                    </div>
                    <div class="impact-item">
                        <i class="fas fa-leaf brand-color"></i>
                        <span>Carbon Neutral</span>
                    </div>
                </div>
            </div>
        </div>

        <hr class="footer-divider">

        <div class="row align-items-center">
            <div class="col-md-6">
                <p class="copyright mb-0">
                    Â© 2024 RecycLanka. All rights reserved.
                    <span class="">Building a Sustainable Sri Lanka</span>
                </p>
            </div>
            <div class="col-md-6 text-md-end">
                <div class="footer-social">
                    <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-linkedin-in"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
    </div>
</footer>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- Custom Script -->
<script src="js/admin-script.js"></script>
<script src="js/admin-waste-schedule.js"></script>

<script>
    document.getElementById('dashboard').style.display = 'block';
    function showSection(sectionId) {
        // Hide all sections
        document.querySelectorAll('.section').forEach(sec => sec.style.display = 'none');
        document.getElementById(sectionId).style.display = 'block';

        // Remove active class from all nav-links
        document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));

        // Add active class to the clicked link
        const clickedLink = document.querySelector(`a[onclick="showSection('${sectionId}')"]`);
        if (clickedLink) {
            clickedLink.classList.add('active');
        }

        // Save last section
        localStorage.setItem('lastSection', sectionId);
    }

    function loadLastSection() {
        const lastSection = localStorage.getItem('lastSection') || 'dashboard';
        showSection(lastSection);
    }

    window.onload = loadLastSection;
</script>

</body>
</html>